<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset=UTF-8">
    <title>Sighup</title>
    <script type="text/javascript" src="../../common/jquery-3.5.1.min.js"></script>
    <script type="text/javascript" src="../../common/context-path-helper.js"></script>
    <script type="text/javascript" src="../../common/Urls.js"></script>
    <script type="text/javascript" src="../../common/is-session-exist.js"></script>
</head>
<body>
<div class="container">
    <h1> Welcome to Super Duper Market</h1> <br>
    <h2> Please enter a unique user name:</h2> <br>
    <form action="LogicServlet" method="POST" enctype="multipart/form-data">
        <label>User Name:</label>
        <input type="text" name="user-name" id="user-name" onkeyup="submitButtonValidateParameters()"/>
        <br><br>
        <label for="user-position">User Position:</label>
        <select name="user-position" id="user-position" onchange="submitButtonValidateParameters()">
            <option style="display: none"></option>
            <option value="manager">Manager</option>
            <option value="customer">Customer</option>
        </select>
        <br>
        <input type='file' id='add-file' class="button" accept='.xml' multiple onchange="submitButtonValidateParameters()"
               disabled="disabled" name="uploadfiles">
        <br>
        <input type="submit" value="SighUp" class="button" disabled="disabled" id="submitForm"/>
    </form>
</div>
<script type="text/javascript">
    isSessionExist({action : "isSessionExist",userNotFoundPage: "", userFoundPage: "../zones/zones.html"});

    function submitButtonValidateParameters() {
        $("#submitForm").ready(function () {
            if ($("#user-name").val() !== "") {
                if ($("#user-position").find("option:selected").attr("value") === "customer") {
                    $("#add-file").prop('disabled', true);
                    $("#add-file").val("");
                    $("#submitForm").prop("disabled", false);
                } else if ($("#user-position").find("option:selected").attr("value") === "manager") {
                    $("#add-file").prop('disabled', false);
                    if ($("#add-file").val() !== "") {
                        $("#submitForm").prop("disabled", false);
                    } else {
                        $("#submitForm").prop("disabled", true);
                    }
                }
            } else {
                $("#add-file").prop('disabled', true);
                $("#add-file").val("");
                $("#submitForm").prop("disabled", true);
            }
        })
    }
</script>
</body>
</html>